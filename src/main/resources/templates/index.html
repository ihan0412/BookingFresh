<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>상품 리스트</title>
  <link rel="stylesheet" href="/css/common.css">
  <style>
    .category-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: #333;
    }
    .category-item img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 8px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .category-item img:hover {
      transform: scale(1.05);
    }
    .product-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
    }
    .product-card {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: center;
    }
    .product-thumbnail {
      width: 100%;
      height: auto;
      object-fit: cover;
    }
    .pagination {
      margin-top: 24px;
      text-align: center;
    }
    .category-list {
      display: grid;
      grid-template-columns: repeat(4, 1fr); /* 가로 4칸 */
      grid-gap: 20px; /* 간격 */
    }

    .category-item {
      display: block;
      text-align: center;
      padding: 10px;
      background-color: #f5f5f5;
      border-radius: 6px;
    }
  </style>
</head>
<body>

<!-- 헤더 포함 -->
<th:block th:replace="fragments/header :: header"></th:block>

<main class="container">

  <section class="category-section">
    <h2>카테고리</h2>
    <div class="category-list">
      <a th:each="category : ${categories}"
         th:href="@{/products(categoryId=${category.id})}"
         class="category-item">
        [[${category.categoryName.label}]]
      </a>
    </div>
  </section>

  <!--  상품 리스트 영역 -->
  <section class="product-list-section">
    <h2>전체 상품</h2>
    <div class="product-grid">
      <div class="product-card" th:each="product : ${products.content}">
        <a th:href="@{/products/{id}(id=${product.id})}" class="product-link">
          <img th:src="${product.photoUrl}" alt="상품사진" class="product-thumbnail">
          <div class="product-info">
            <h3 th:text="${product.name}">상품명</h3>
            <p th:text="'중량: ' + ${product.weightPieces}">중량</p>
            <p th:text="'가격: ₩' + ${product.price}">가격</p>
          </div>
        </a>
      </div>
    </div>
  </section>

  <!--  페이지네이션 -->
  <section class="pagination-section">
    <div class="pagination">
      <a th:if="${products.hasPrevious()}" th:href="@{/products(page=${products.number - 1}, category=${param.category})}">이전</a>
      <span th:text="${products.number + 1}">1</span>
      <a th:if="${products.hasNext()}" th:href="@{/products(page=${products.number + 1}, category=${param.category})}">다음</a>
    </div>
  </section>

</main>

<!-- 푸터 포함 -->
<th:block th:replace="fragments/footer :: footer"></th:block>

</body>
</html>
